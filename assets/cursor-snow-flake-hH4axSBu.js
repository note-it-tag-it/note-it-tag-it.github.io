var R=Object.defineProperty;var C=(n,t,i)=>t in n?R(n,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[t]=i;var l=(n,t,i)=>C(n,typeof t!="symbol"?t+"":t,i);import{r as u}from"./index-BfdtaCSe.js";const b=({element:n})=>{const t=u.useRef(null),i=u.useRef([]),d=u.useRef([]),m=u.useRef(null),y=["❄️"],f=u.useRef(null);return u.useEffect(()=>{if(typeof window>"u")return;f.current=window.matchMedia("(prefers-reduced-motion: reduce)");const s=document.createElement("canvas"),a=s.getContext("2d");if(!a)return;const c=n||document.body;s.style.position=n?"absolute":"fixed",s.style.top="0",s.style.left="0",s.style.pointerEvents="none",s.className="z-50",c.appendChild(s),t.current=s;const p=()=>{s.width=n?c.clientWidth:window.innerWidth,s.height=n?c.clientHeight:window.innerHeight},E=()=>{a.font="12px serif",a.textBaseline="middle",a.textAlign="center",y.forEach(e=>{const o=a.measureText(e),r=document.createElement("canvas"),h=r.getContext("2d");h&&(r.width=o.width,r.height=o.actualBoundingBoxAscent*2,h.textAlign="center",h.font="12px serif",h.textBaseline="middle",h.fillText(e,r.width/2,o.actualBoundingBoxAscent),d.current.push(r))})},M=(e,o)=>{const r=d.current[Math.floor(Math.random()*d.current.length)];i.current.push(new B(e,o,r))},v=e=>{const o=n?e.clientX-c.getBoundingClientRect().left:e.clientX,r=n?e.clientY-c.getBoundingClientRect().top:e.clientY;M(o,r)},S=()=>{!a||!s||(a.clearRect(0,0,s.width,s.height),i.current.forEach((e,o)=>{e.update(a),e.lifeSpan<0&&i.current.splice(o,1)}))},g=()=>{S(),m.current=requestAnimationFrame(g)},w=()=>{var e;(e=f.current)!=null&&e.matches||(p(),E(),c.addEventListener("mousemove",v),window.addEventListener("resize",p),g())},x=()=>{t.current&&t.current.remove(),m.current&&cancelAnimationFrame(m.current),c.removeEventListener("mousemove",v),window.removeEventListener("resize",p)};return f.current.onchange=()=>{var e;(e=f.current)!=null&&e.matches?x():w()},w(),()=>x()},[n]),null};class B{constructor(t,i,d){l(this,"position");l(this,"velocity");l(this,"lifeSpan");l(this,"initialLifeSpan");l(this,"canv");this.position={x:t,y:i},this.velocity={x:(Math.random()<.5?-1:1)*(Math.random()/2),y:1+Math.random()},this.lifeSpan=Math.floor(Math.random()*60+80),this.initialLifeSpan=this.lifeSpan,this.canv=d}update(t){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.lifeSpan--,this.velocity.x+=(Math.random()<.5?-1:1)*2/75,this.velocity.y-=Math.random()/300;const i=Math.max(this.lifeSpan/this.initialLifeSpan,0);t.save(),t.translate(this.position.x,this.position.y),t.scale(i,i),t.drawImage(this.canv,-this.canv.width/2,-this.canv.height/2),t.restore()}}export{b as default};
