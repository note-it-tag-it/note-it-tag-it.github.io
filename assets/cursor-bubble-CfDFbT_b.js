var x=Object.defineProperty;var L=(n,e,s)=>e in n?x(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s;var h=(n,e,s)=>L(n,typeof e!="symbol"?e+"":e,s);import{r as l,j as M}from"./index-CMdFx5aj.js";class S{constructor(e,s){h(this,"lifeSpan");h(this,"initialLifeSpan");h(this,"velocity");h(this,"position");h(this,"baseDimension");this.initialLifeSpan=Math.floor(Math.random()*60+60),this.lifeSpan=this.initialLifeSpan,this.velocity={x:(Math.random()<.5?-1:1)*(Math.random()/10),y:-.4+Math.random()*-1},this.position={x:e,y:s},this.baseDimension=4}update(e){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.velocity.x+=(Math.random()<.5?-1:1)*2/75,this.velocity.y-=Math.random()/600,this.lifeSpan--;const s=.2+(this.initialLifeSpan-this.lifeSpan)/this.initialLifeSpan;e.fillStyle="#e6f1f7",e.strokeStyle="#3a92c5",e.beginPath(),e.arc(this.position.x-this.baseDimension/2*s,this.position.y-this.baseDimension/2,this.baseDimension*s,0,2*Math.PI),e.stroke(),e.fill(),e.closePath()}}const D=({wrapperElement:n})=>{const e=l.useRef(null),s=l.useRef([]),r=l.useRef({x:0,y:0}),a=l.useRef(null);return l.useEffect(()=>{const p=window.matchMedia("(prefers-reduced-motion: reduce)");let i=null,c=null,d=window.innerWidth,f=window.innerHeight;const b=()=>{if(p.matches)return console.log("This browser has prefers reduced motion turned on, so the cursor did not init"),!1;i=e.current,i&&(c=i.getContext("2d"),c&&(i.style.top="0px",i.style.left="0px",i.style.pointerEvents="none",n?(i.style.position="absolute",n.appendChild(i),i.width=n.clientWidth,i.height=n.clientHeight):(i.style.position="fixed",document.body.appendChild(i),i.width=d,i.height=f),R(),g()))},R=()=>{const t=n||document.body;t.addEventListener("mousemove",m),t.addEventListener("touchmove",u,{passive:!0}),t.addEventListener("touchstart",u,{passive:!0}),window.addEventListener("resize",v)},v=()=>{d=window.innerWidth,f=window.innerHeight,e.current&&(n?(e.current.width=n.clientWidth,e.current.height=n.clientHeight):(e.current.width=d,e.current.height=f))},u=t=>{if(t.touches.length>0)for(let o=0;o<t.touches.length;o++)y(t.touches[o].clientX,t.touches[o].clientY)},m=t=>{if(n){const o=n.getBoundingClientRect();r.current.x=t.clientX-o.left,r.current.y=t.clientY-o.top}else r.current.x=t.clientX,r.current.y=t.clientY;y(r.current.x,r.current.y)},y=(t,o)=>{s.current.push(new S(t,o))},w=()=>{if(!(!i||!c)&&s.current.length!==0){c.clearRect(0,0,i.width,i.height);for(let t=0;t<s.current.length;t++)s.current[t].update(c);for(let t=s.current.length-1;t>=0;t--)s.current[t].lifeSpan<0&&s.current.splice(t,1);s.current.length===0&&c.clearRect(0,0,i.width,i.height)}},g=()=>{w(),a.current=requestAnimationFrame(g)};return b(),()=>{i&&i.remove(),a.current&&cancelAnimationFrame(a.current);const t=n||document.body;t.removeEventListener("mousemove",m),t.removeEventListener("touchmove",u),t.removeEventListener("touchstart",u),window.removeEventListener("resize",v)}},[n]),M.jsx("canvas",{ref:e,className:"z-50"})};export{D as default};
