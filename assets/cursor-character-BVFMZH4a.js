var X=Object.defineProperty;var Y=(c,r,d)=>r in c?X(c,r,{enumerable:!0,configurable:!0,writable:!0,value:d}):c[r]=d;var u=(c,r,d)=>Y(c,typeof r!="symbol"?r+"":r,d);import{r as v,j as I}from"./index-BfdtaCSe.js";const k=({characters:c=["h","e","l","l","o"],colors:r=["#6622CC","#A755C2","#B07C9E","#B59194","#D2A1B8"],cursorOffset:d={x:0,y:0},font:y="15px serif",characterLifeSpanFunction:L=()=>Math.floor(Math.random()*60+80),initialCharacterVelocityFunction:S=()=>({x:(Math.random()<.5?-1:1)*Math.random()*5,y:(Math.random()<.5?-1:1)*Math.random()*5}),characterVelocityChangeFunctions:p={x_func:()=>(Math.random()<.5?-1:1)/30,y_func:()=>(Math.random()<.5?-1:1)/15},characterScalingFunction:B=(h,n)=>Math.max((n-h)/n*2,0),characterNewRotationDegreesFunction:C=(h,n)=>(n-h)/5,wrapperElement:o})=>{const h=v.useRef(null),n=v.useRef([]),g=v.useRef({x:0,y:0}),M=v.useRef(null),m=v.useRef([]);return v.useEffect(()=>{const z=window.matchMedia("(prefers-reduced-motion: reduce)");let e=null,a=null,w=window.innerWidth,R=window.innerHeight;const H=()=>Math.random()<.5?-1:1;class P{constructor(i,s,l){u(this,"rotationSign");u(this,"age");u(this,"initialLifeSpan");u(this,"lifeSpan");u(this,"velocity");u(this,"position");u(this,"canv");const f=L();this.rotationSign=H(),this.age=0,this.initialLifeSpan=f,this.lifeSpan=f,this.velocity=S(),this.position={x:i+d.x,y:s+d.y},this.canv=l}update(i){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.lifeSpan--,this.age++,this.velocity.x+=p.x_func(this.age,this.initialLifeSpan),this.velocity.y+=p.y_func(this.age,this.initialLifeSpan);const s=B(this.age,this.initialLifeSpan),f=this.rotationSign*C(this.age,this.initialLifeSpan)*.0174533;i.translate(this.position.x,this.position.y),i.rotate(f),i.drawImage(this.canv,-this.canv.width/2*s,-this.canv.height/2,this.canv.width*s,this.canv.height*s),i.rotate(-f),i.translate(-this.position.x,-this.position.y)}}const T=()=>{if(z.matches)return console.log("This browser has prefers reduced motion turned on, so the cursor did not init"),!1;e=h.current,e&&(a=e.getContext("2d"),a&&(e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",o?(e.style.position="absolute",o.appendChild(e),e.width=o.clientWidth,e.height=o.clientHeight):(e.style.position="fixed",document.body.appendChild(e),e.width=w,e.height=R),a.font=y,a.textBaseline="middle",a.textAlign="center",c.forEach(t=>{let i=a.measureText(t),s=document.createElement("canvas"),l=s.getContext("2d");if(l){s.width=i.width,s.height=i.actualBoundingBoxAscent*2.5,l.textAlign="center",l.font=y,l.textBaseline="middle";var f=r[Math.floor(Math.random()*r.length)];l.fillStyle=f,l.fillText(t,s.width/2,i.actualBoundingBoxAscent),m.current.push(s)}}),_(),W()))},_=()=>{const t=o||document.body;t.addEventListener("mousemove",A),t.addEventListener("touchmove",x,{passive:!0}),t.addEventListener("touchstart",x,{passive:!0}),window.addEventListener("resize",b)},b=()=>{w=window.innerWidth,R=window.innerHeight,h.current&&(o?(h.current.width=o.clientWidth,h.current.height=o.clientHeight):(h.current.width=w,h.current.height=R))},x=t=>{if(t.touches.length>0)for(let i=0;i<t.touches.length;i++)E(t.touches[i].clientX,t.touches[i].clientY,m.current[Math.floor(Math.random()*m.current.length)])},A=t=>{if(o){const i=o.getBoundingClientRect();g.current.x=t.clientX-i.left,g.current.y=t.clientY-i.top}else g.current.x=t.clientX,g.current.y=t.clientY;E(g.current.x,g.current.y,m.current[Math.floor(Math.random()*c.length)])},E=(t,i,s)=>{n.current.push(new P(t,i,s))},j=()=>{if(!(!e||!a)&&n.current.length!==0){a.clearRect(0,0,e.width,e.height);for(let t=0;t<n.current.length;t++)n.current[t].update(a);for(let t=n.current.length-1;t>=0;t--)n.current[t].lifeSpan<0&&n.current.splice(t,1);n.current.length===0&&a.clearRect(0,0,e.width,e.height)}},W=()=>{j(),M.current=requestAnimationFrame(W)};return T(),()=>{e&&e.remove(),M.current&&cancelAnimationFrame(M.current);const t=o||document.body;t.removeEventListener("mousemove",A),t.removeEventListener("touchmove",x),t.removeEventListener("touchstart",x),window.removeEventListener("resize",b)}},[c,r,d,y,L,S,p,B,C,o]),I.jsx("canvas",{ref:h,className:"z-50"})};export{k as default};
